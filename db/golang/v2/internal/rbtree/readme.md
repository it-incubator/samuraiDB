Правила красно-черного дерева:

1. **Корень всегда черный**.
2. **Листья (NIL-узлы)** считаются черными.
3. **Красный узел не может иметь красных потомков** (нет двух красных узлов подряд). То есть красный узел должен иметь двух черных потомков, а черный может иметь двух черных потомков.
4. **Все пути от узла до его листьев содержат одинаковое количество черных узлов** (чёрная высота).
5. **Любой узел имеет не более двух потомков** (свойство BST).

**Вставка**

1. При вставке каждый новый узел красный
2. После каждой вставки происходит проверка, запускается функция `insertFixup()`

Структуру узла: помимо ключа и значения, нужно хранить цвет, указатели на левого и правого потомка, возможно родителя.